!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["for-form-embed-handler"]=t():e["for-form-embed-handler"]=t()}(this,function(){return function(){"use strict";var e={};function t(e){return e.map(e=>{let t=e.substring(e.indexOf("=")+1),n=encodeURIComponent(decodeURIComponent(t));return e.replace(t,n)}).join("&")}let n=/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?(\/[^\s]*)?$/i;return window.jotformEmbedHandler=function(e,o){!function(){let o=document.querySelector(e);if(o){let e,{src:i}=o;if(i.includes("jsForm=true"))return;let r=window.location.href,c="";if(r&&r.indexOf("?")>-1&&(c=t(c=r.substring(r.indexOf("?")+1).split("&"))),i&&i.indexOf("?")>-1){let e=i.substr(i.indexOf("?")+1).split("&");e=t(e),c+=`&${e}`,i=i.substring(0,i.indexOf("?"))}c+=`&isIframeEmbed=1&parentURL=${encodeURIComponent((e=window.location.href,n.test(e)?e:window.top.location.href))}`,o.src=`${i}?${c}`}}(),window.isPermitted=function(e,t){let n=document.createElement("a");n.href=e;let{hostname:o}=n,i=!1;if(void 0!==o)return t.forEach(e=>{(o.slice(-1*e.length-1)===".".concat(e)||o===e)&&(i=!0)}),i},window.addEventListener("message",function(t){if("object"==typeof t.data)return;let n=t.data.split(":"),i=document.querySelector(e);if(!i)return;let r=[];if(o){let{hostname:e}=new URL(o);r=[e]}else r=["jotform.com","jotform.pro"];!function(e,t,n,o){let i=document.querySelector(o);switch(e[0]){case"scrollIntoView":i.scrollIntoView();break;case"setHeight":i.style.height=`${e[1]}px`,!Number.isNaN(e[1])&&parseInt(i.style.minHeight,10)>parseInt(e[1],10)&&(i.style.minHeight=`${e[1]}px`);break;case"setMinHeight":i.style.minHeight=`${e[1]}px`;break;case"collapseErrorPage":i.clientHeight>window.innerHeight&&(i.style.height=`${window.innerHeight}px`);break;case"reloadPage":window.location.reload();break;case"removeIframeOnloadAttr":i.removeAttribute("onload");break;case"loadScript":if(!window.isPermitted(t.origin,n))break;let r=document.createElement("script");r.src=e.length>3?`${e[1]}:${e[2]}`:e[1],r.type="text/javascript",document.body.appendChild(r);break;case"exitFullscreen":window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen||window.document.mozCancelFullscreen?window.document.mozCancelFullScreen():window.document.webkitExitFullscreen?window.document.webkitExitFullscreen():window.document.msExitFullscreen&&window.document.msExitFullscreen();break;case"setDeviceType":let[,c]=e;window.jfDeviceType=c;break;case"backgroundStyles":new URLSearchParams(e[1]).forEach((e,t)=>{i.style[t]=e}),(i.contentDocument?i.contentDocument:i.contentWindow.document||i.document).documentElement.style.background="none"}}(n,t,r,e);var c=r;if(window.isPermitted(t.origin,c)&&"contentWindow"in i&&"postMessage"in i.contentWindow){let e={docurl:encodeURIComponent(document.URL),referrer:encodeURIComponent(document.referrer)};i.contentWindow.postMessage(JSON.stringify({type:"urls",value:e}),"*")}},!1)},e=e.default}()});
//# sourceMappingURL=for-form-embed-handler.js.map